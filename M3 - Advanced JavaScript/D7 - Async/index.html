<!doctype html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">

    <title>Hello, world!</title>
</head>

<body>
    <h1>Hello, world!</h1>


    <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1"
            data-bs-toggle="dropdown" aria-expanded="false">
            User Info
        </button>
        <input type="text" name="" id="userinput">
        <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton1">
            <li onclick="setField('name')"><a id="name" class="dropdown-item" href="#">Names</a></li>
            <li onclick="setField('username')"><a id="username" class="dropdown-item" href="#">User Names</a></li>
            <li onclick="setField('email')"><a id="email" class="dropdown-item" href="#">Emails</a></li>
        </ul>
    </div>

    <div class="container">
        <ul id="userinfo" class="list-group">

        </ul>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
        crossorigin="anonymous"></script>


    <script>
        const infoList = (info) => `
            <li class="list-group-item">${info}</li>`

        const getUserApi = async () => {

            const response = await fetch('https://jsonplaceholder.typicode.com/users')
            const userData = await response.json();

            // consloe.log(userData)
            return userData
        }
        // Create a dropdown with three options: "name", "username" and "email".This dropdown will be your filter.

        let name = document.getElementById('name')
        let username = document.getElementById('username')
        let email = document.getElementById('email')
        let infoContainer = document.getElementById('userinfo')

        let field = ''
        const setField = (name) => { field = name }
        let namearr = []
        let emailarr = []
        let usernamearr = []

        const displayNames = () => {

            getUserApi().then(data => {

                infoContainer.innerHTML = ""
                // name.innerText = data.name

                data.forEach(info => {

                    infoContainer.innerHTML += infoList(info.name)
                    namearr.push(info.name)
                });


            })
        }


        const displayUserName = () => {
            getUserApi().then(data => {
                console.log(data)
                infoContainer.innerHTML = ""
                // name.innerText = data.name

                data.forEach(info => {

                    infoContainer.innerHTML += infoList(info.username)
                    usernamearr.push(info.username)

                });



            })
        }
        console.log(usernamearr)

        const displayEmail = () => {
            getUserApi().then(data => {
                console.log(data)
                infoContainer.innerHTML = ""
                // name.innerText = data.name

                data.forEach(info => {

                    infoContainer.innerHTML += infoList(info.email)
                    emailarr.push(info.email)

                });

            })
        }


        let query = document.querySelector("#userinput")

        // const searchUserName = (event) => {
        //     query.onchange = searchUserName
        //     query = event.target.value
        //     console.log(query)
        //     infoContainer.innerHTML = ""
        //     usernamearr.filter(username => {
        //         if(username.toLowerCase().includes(query.toLowerCase()))
        //         {infoContainer.innerHTML += infoList(username)}
        //     })
        // }

        // const searchName = (event) => {

        //     diferentquery = event.target.value
        //     console.log(query)
        //     infoContainer.innerHTML = ""
        //     namearr.filter(name => {
        //         if(name.toLowerCase().includes(query.toLowerCase()))
        //         {infoContainer.innerHTML += infoList(name)}
        //     })
        // }

        query.onchange = (event) => {

            query = event.target.value
            console.log(query)
            infoContainer.innerHTML = ""

            if (field === "email") {
                emailarr.filter(email => {
                    if (email.toLowerCase().includes(query.toLowerCase())) { infoContainer.innerHTML += infoList(email) }
                })
            } else if (field === "name") {
                namearr.filter(name => {
                    if (name.toLowerCase().includes(query.toLowerCase())) { infoContainer.innerHTML += infoList(name) }
                })
            } else if (field === "username") {
                usernamearr.filter(username => {
                    if (username.toLowerCase().includes(query.toLowerCase())) { infoContainer.innerHTML += infoList(username) }
                })
            }







        }



        name.onclick = displayNames

        username.onclick = displayUserName

        email.onclick = displayEmail


    </script>
</body>

</html>